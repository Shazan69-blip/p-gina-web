<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Formulario | Grupo Fe</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='color de formulario.css') }}">
</head>
<body>
  <header class="navbar">
  <div class="logo">
    <img src="{{ url_for('static', filename='logo de arriba.png') }}" alt="Logo" class="logo-img">
    <h1>Grupo FE</h1>
  </div>

  <!-- Bot√≥n men√∫ hamburguesa -->
  <button class="menu-toggle" id="menuToggle">‚ò∞</button>

  <!-- Men√∫ de navegaci√≥n -->
  <nav>
    <ul id="navMenu">
      <li><a href="/">Inicio</a></li>
      <li><a href="/acerca">Acerca de nosotros</a></li>
      <li><a href="/servicios">Servicios</a></li>
      <li><a class="activo" href="/formulario">Formulario</a></li>
      <li><a href="/contacto">Contacto</a></li>
    </ul>
  </nav>
</header>


  <main class="contenedor">
    <h2>Formulario de aplicaci√≥n al Bono Familiar de Vivienda ‚Äì Art√≠culo 59 (Ley 7052)</h2>

    <div class="top-actions">
      <a class="btn btn-gold" href="{{ url_for('static', filename='Formulario_Beneficiario_Art59_GrupoFe.docx') }}" download>
        üìÑ Descargar formulario (.docx)
      </a>
      <button id="btn-fill-online" class="btn btn-outline">üñäÔ∏è Llenar en l√≠nea</button>
    </div>

    <!-- Formulario: submitea a /enviar-formulario -->
    <form id="mainForm" class="formulario" action="/enviar-formulario" method="POST">
      <!-- 1. Datos del Beneficiario Principal -->
      <section class="card">
        <h3>1. Datos del Beneficiario Principal</h3>
        <label>Nombre completo:
          <input type="text" name="beneficiario_nombre" required>
        </label>

        <label>N√∫mero de c√©dula:
          <input type="text" name="beneficiario_cedula" required>
        </label>

        <label>Tel√©fono:
          <input type="tel" name="beneficiario_telefono" required>
        </label>

        <label>Correo electr√≥nico:
          <input type="email" name="beneficiario_email" required>
        </label>

        <label>Estado civil:
          <select name="beneficiario_estado_civil" id="estadoCivil" required>
            <option value="">Seleccione...</option>
            <option value="Soltero">Soltero</option>
            <option value="Casado">Casado</option>
            <option value="Divorciado">Divorciado</option>
            <option value="Viudo">Viudo</option>
            <option value="Separado">Separado</option>
            <option value="Union Libre">Uni√≥n Libre</option>
          </select>
        </label>

        <div id="tiempoUnionWrapper" style="display:none;">
          <label>Tiempo de uni√≥n (meses/a√±os):
            <input type="text" name="beneficiario_tiempo_union" placeholder="Ej: 3 a√±os">
          </label>
        </div>

        <label>Nacionalidad:
          <input type="text" name="beneficiario_nacionalidad">
        </label>

        <label>Escolaridad:
          <input type="text" name="beneficiario_escolaridad">
        </label>

        <label>Direcci√≥n exacta de residencia actual:
          <textarea name="beneficiario_direccion" rows="2"></textarea>
        </label>

        <div class="row">
          <label>Provincia: <input type="text" name="beneficiario_provincia"></label>
          <label>Cant√≥n: <input type="text" name="beneficiario_canton"></label>
          <label>Distrito: <input type="text" name="beneficiario_distrito"></label>
        </div>
        <label>Barrio: <input type="text" name="beneficiario_barrio"></label>
      </section>

      <!-- 2. Composici√≥n del Grupo Familiar -->
      <section class="card">
        <h3>2. Composici√≥n del Grupo Familiar</h3>
        <p>Indique todos los miembros del grupo familiar que habitar√°n la vivienda (hasta 12)</p>

        <div id="familyList">
          <div class="family-row">
            <input type="text" name="f_nombre[]" placeholder="Nombre">
            <input type="text" name="f_parentesco[]" placeholder="Parentesco">
            <input type="number" name="f_edad[]" placeholder="Edad" min="0">
            <input type="text" name="f_ocupacion[]" placeholder="Ocupaci√≥n">
            <input type="number" name="f_ingreso[]" placeholder="Ingreso mensual (‚Ç°)" min="0">
            <button type="button" class="small-btn remove-row" title="Eliminar">‚úñ</button>
          </div>
        </div>

        <div class="row-actions">
          <button type="button" id="addMember" class="btn">+ Agregar miembro</button>
          <small class="muted">Puedes agregar hasta 12 miembros</small>
        </div>

        <label>¬øExiste alg√∫n miembro en estado de gestaci√≥n?
          <select name="gestacion_existe" id="gestacion" >
            <option value="No">No</option>
            <option value="Si">S√≠</option>
          </select>
        </label>
        <div id="gestacionMeses" style="display:none;">
          <label>Meses de gestaci√≥n:
            <input type="number" name="gestacion_meses" min="0">
          </label>
        </div>

        <label>¬øAlg√∫n miembro con discapacidad?
          <select name="discapacidad_existe" id="discapacidad">
            <option value="No">No</option>
            <option value="Si">S√≠</option>
          </select>
        </label>
        <div id="discapacidadDetalle" style="display:none;">
          <label>Explique:
            <textarea name="discapacidad_detalle" rows="3"></textarea>
          </label>
        </div>
      </section>

      <!-- 3. Informaci√≥n Socioecon√≥mica -->
      <section class="card">
        <h3>3. Informaci√≥n Socioecon√≥mica</h3>
        <label>Actividad econ√≥mica principal del beneficiario:
          <input type="text" name="actividad_economica">
        </label>

        <label>Tiempo de laborar:
          <input type="text" name="tiempo_laborar" placeholder="Ej: 5 a√±os">
        </label>

        <label>Cotiza en la CCSS:
          <select name="cotiza_ccss">
            <option>Si</option>
            <option>No</option>
          </select>
        </label>

        <label>Ingreso mensual familiar total (‚Ç°):
          <input type="number" name="ingreso_mensual" min="0">
        </label>

        <label>¬øRecibe alg√∫n subsidio o ayuda estatal?
          <select name="recibe_subsidio">
            <option>No</option>
            <option>Si</option>
          </select>
        </label>
        <label>¬øCu√°l?:
          <input type="text" name="cual_subsidio">
        </label>

        <label>Recibe pensi√≥n alimentaria:
          <select name="recibe_pension">
            <option>No</option>
            <option>Si</option>
          </select>
        </label>

        <label>Voluntaria / Obligatoria:
          <select name="pension_tipo">
            <option>Voluntaria</option>
            <option>Obligatoria</option>
          </select>
        </label>

        <label>Monto pensi√≥n alimentaria (‚Ç°):
          <input type="number" name="pension_monto" min="0">
        </label>

        <label>¬øPosee veh√≠culo?
          <select name="posee_vehiculo">
            <option>No</option>
            <option>Si</option>
          </select>
        </label>
        <label>Marca/Modelo:
          <input type="text" name="vehiculo_marca_modelo">
        </label>
      </section>

      <!-- 4. Informaci√≥n del Proyecto o Lote -->
      <section class="card">
        <h3>4. Informaci√≥n del Proyecto o Lote</h3>
        <label>Nombre del proyecto:
          <input type="text" name="proyecto_nombre">
        </label>

        <label>Ubicaci√≥n exacta del lote o vivienda:
          <textarea name="proyecto_ubicacion" rows="2"></textarea>
        </label>

        <label>N√∫mero de lote / identificaci√≥n catastral:
          <input type="text" name="proyecto_numero_lote">
        </label>

        <label>Propietario del terreno:
          <input type="text" name="propietario_terreno">
        </label>

        <label>N√∫mero de c√©dula del vendedor:
          <input type="text" name="vendedor_cedula">
        </label>

        <label>Tel√©fono del vendedor:
          <input type="tel" name="vendedor_telefono">
        </label>

        <label>Direcci√≥n del vendedor:
          <input type="text" name="vendedor_direccion">
        </label>

        <label>Monto del terreno (‚Ç°):
          <input type="number" name="monto_terreno" min="0">
        </label>

        <label>Sistema constructivo:
          <div class="checkbox-group">
            <label><input type="checkbox" name="sistema_constructivo_prefablock" checked> Prefablock</label>
            <label><input type="checkbox" name="sistema_constructivo_otro"> Otro</label>
            <input type="text" name="sistema_constructivo_otro_text" placeholder="Si 'Otro', especifique">
          </div>
        </label>

        <label>Tipo de vivienda:
          <div class="radio-group">
            <label><input type="radio" name="tipo_vivienda" value="Nueva" checked> Nueva</label>
            <label><input type="radio" name="tipo_vivienda" value="Ampliacion"> Ampliaci√≥n</label>
            <label><input type="radio" name="tipo_vivienda" value="Reparacion"> Reparaci√≥n</label>
          </div>
        </label>
      </section>

      <!-- 5. Declaraci√≥n Jurada -->
      <section class="card">
        <h3>5. Declaraci√≥n Jurada del Beneficiario</h3>
        <p>Declaro bajo juramento que la informaci√≥n suministrada en este formulario es veraz y completa, y que conozco que cualquier falsedad puede anular mi solicitud al Bono Familiar de Vivienda conforme al Art√≠culo 59 de la Ley 7052 y las regulaciones del BANHVI.</p>

        <label>Firma del Beneficiario (nombre impreso):
          <input type="text" name="firma_beneficiario">
        </label>

        <label>Fecha:
          <input type="date" name="firma_fecha">
        </label>
      </section>

      <!-- 6. Uso Exclusivo de Grupo Fe -->
      <section class="card">
        <h3>6. Uso Exclusivo de Grupo Fe</h3>
        <label>Verificaci√≥n social realizada por:
          <input type="text" name="verificacion_social_por">
        </label>
        <label>Fecha verificaci√≥n social:
          <input type="date" name="verificacion_social_fecha">
        </label>

        <label>Verificaci√≥n t√©cnica realizada por:
          <input type="text" name="verificacion_tecnica_por">
        </label>
        <label>Fecha verificaci√≥n t√©cnica:
          <input type="date" name="verificacion_tecnica_fecha">
        </label>

        <label>Observaciones:
          <textarea name="observaciones" rows="3"></textarea>
        </label>
      </section>

      <div class="form-actions">
        <button type="submit" class="btn btn-gold">Enviar formulario</button>
      </div>
    </form>

    <footer class="foot">
      <small>Documento de uso interno ‚Äì Grupo Fe Constructora de Vivienda de Inter√©s Social</small>
    </footer>
  </main>




  <script>
(function(){
  const addMemberBtn = document.getElementById('addMember');
  const familyList = document.getElementById('familyList');

  // Agregar miembros del grupo familiar
  function newFamilyRow() {
    const row = document.createElement('div');
    row.className = 'family-row';
    row.innerHTML = `
      <input type="text" name="f_nombre[]" placeholder="Nombre">
      <input type="text" name="f_parentesco[]" placeholder="Parentesco">
      <input type="number" name="f_edad[]" placeholder="Edad" min="0">
      <input type="text" name="f_ocupacion[]" placeholder="Ocupaci√≥n">
      <input type="number" name="f_ingreso[]" placeholder="Ingreso mensual (‚Ç°)" min="0">
      <button type="button" class="small-btn remove-row" title="Eliminar">‚úñ</button>
    `;
    return row;
  }

  addMemberBtn.addEventListener('click', () => {
    const count = familyList.querySelectorAll('.family-row').length;
    if (count >= 12) return alert('M√°ximo 12 miembros.');
    familyList.appendChild(newFamilyRow());
  });

  familyList.addEventListener('click', (e) => {
    if (e.target.classList.contains('remove-row')) {
      e.target.closest('.family-row').remove();
    }
  });

  // Mostrar/ocultar campos condicionales
  document.getElementById('gestacion').addEventListener('change', (e) => {
    document.getElementById('gestacionMeses').style.display = e.target.value === 'Si' ? 'block' : 'none';
  });

  document.getElementById('discapacidad').addEventListener('change', (e) => {
    document.getElementById('discapacidadDetalle').style.display = e.target.value === 'Si' ? 'block' : 'none';
  });

  document.getElementById('estadoCivil').addEventListener('change', (e) => {
    document.getElementById('tiempoUnionWrapper').style.display = e.target.value === 'Union Libre' ? 'block' : 'none';
  });

  document.getElementById('btn-fill-online').addEventListener('click', () => {
    document.querySelector('.formulario').scrollIntoView({behavior:'smooth'});
  });

  // üöÄ Enviar formulario abriendo Gmail
  const form = document.getElementById('mainForm');
  form.addEventListener('submit', (e) => {
    e.preventDefault(); // Evita env√≠o al servidor

    const data = new FormData(form);
    let body = "";

    // üî∏ Secci√≥n 1
    body += "----- DATOS DEL BENEFICIARIO PRINCIPAL -----\n";
    body += `Nombre completo: ${data.get("beneficiario_nombre")}\n`;
    body += `C√©dula: ${data.get("beneficiario_cedula")}\n`;
    body += `Tel√©fono: ${data.get("beneficiario_telefono")}\n`;
    body += `Correo: ${data.get("beneficiario_email")}\n`;
    body += `Estado civil: ${data.get("beneficiario_estado_civil")}\n`;
    if (data.get("beneficiario_tiempo_union"))
      body += `Tiempo de uni√≥n: ${data.get("beneficiario_tiempo_union")}\n`;
    body += `Nacionalidad: ${data.get("beneficiario_nacionalidad")}\n`;
    body += `Escolaridad: ${data.get("beneficiario_escolaridad")}\n`;
    body += `Direcci√≥n: ${data.get("beneficiario_direccion")}\n`;
    body += `Provincia: ${data.get("beneficiario_provincia")}, Cant√≥n: ${data.get("beneficiario_canton")}, Distrito: ${data.get("beneficiario_distrito")}, Barrio: ${data.get("beneficiario_barrio")}\n\n`;

    // üî∏ Secci√≥n 2
    body += "----- COMPOSICI√ìN DEL GRUPO FAMILIAR -----\n";
    const nombres = document.querySelectorAll('input[name="f_nombre[]"]');
    const parentescos = document.querySelectorAll('input[name="f_parentesco[]"]');
    const edades = document.querySelectorAll('input[name="f_edad[]"]');
    const ocupaciones = document.querySelectorAll('input[name="f_ocupacion[]"]');
    const ingresos = document.querySelectorAll('input[name="f_ingreso[]"]');
    for (let i = 0; i < nombres.length; i++) {
      if (nombres[i].value.trim()) {
        body += `${i + 1}. ${nombres[i].value} | ${parentescos[i].value} | ${edades[i].value} a√±os | ${ocupaciones[i].value} | ‚Ç°${ingresos[i].value}\n`;
      }
    }
    body += `\nGestaci√≥n: ${data.get("gestacion_existe")} (${data.get("gestacion_meses") || "-"} meses)\n`;
    body += `Discapacidad: ${data.get("discapacidad_existe")} ${data.get("discapacidad_detalle") ? "(" + data.get("discapacidad_detalle") + ")" : ""}\n\n`;

    // üî∏ Secci√≥n 3
    body += "----- INFORMACI√ìN SOCIOECON√ìMICA -----\n";
    body += `Actividad econ√≥mica: ${data.get("actividad_economica")}\n`;
    body += `Tiempo de laborar: ${data.get("tiempo_laborar")}\n`;
    body += `Cotiza en la CCSS: ${data.get("cotiza_ccss")}\n`;
    body += `Ingreso mensual familiar total: ‚Ç°${data.get("ingreso_mensual")}\n`;
    body += `Recibe subsidio/ayuda estatal: ${data.get("recibe_subsidio")} - ${data.get("cual_subsidio")}\n`;
    body += `Pensi√≥n alimentaria: ${data.get("recibe_pension")} (${data.get("pension_tipo")}) ‚Ç°${data.get("pension_monto")}\n`;
    body += `Posee veh√≠culo: ${data.get("posee_vehiculo")} - ${data.get("vehiculo_marca_modelo")}\n\n`;

    // üî∏ Secci√≥n 4
    body += "----- INFORMACI√ìN DEL PROYECTO O LOTE -----\n";
    body += `Proyecto: ${data.get("proyecto_nombre")}\n`;
    body += `Ubicaci√≥n: ${data.get("proyecto_ubicacion")}\n`;
    body += `N√∫mero de lote: ${data.get("proyecto_numero_lote")}\n`;
    body += `Propietario del terreno: ${data.get("propietario_terreno")}\n`;
    body += `C√©dula del vendedor: ${data.get("vendedor_cedula")}\n`;
    body += `Tel√©fono del vendedor: ${data.get("vendedor_telefono")}\n`;
    body += `Direcci√≥n del vendedor: ${data.get("vendedor_direccion")}\n`;
    body += `Monto del terreno: ‚Ç°${data.get("monto_terreno")}\n`;
    body += `Sistema constructivo: Prefablock ${data.get("sistema_constructivo_otro") ? ", Otro: " + data.get("sistema_constructivo_otro_text") : ""}\n`;
    body += `Tipo de vivienda: ${data.get("tipo_vivienda")}\n\n`;

    // üî∏ Secci√≥n 5
    body += "----- DECLARACI√ìN JURADA -----\n";
    body += `Firma (nombre impreso): ${data.get("firma_beneficiario")}\n`;
    body += `Fecha: ${data.get("firma_fecha")}\n\n`;

    // üî∏ Secci√≥n 6
    body += "----- USO EXCLUSIVO GRUPO FE -----\n";
    body += `Verificaci√≥n social: ${data.get("verificacion_social_por")} (${data.get("verificacion_social_fecha")})\n`;
    body += `Verificaci√≥n t√©cnica: ${data.get("verificacion_tecnica_por")} (${data.get("verificacion_tecnica_fecha")})\n`;
    body += `Observaciones: ${data.get("observaciones")}\n\n`;
    body += "---------------------------------------------\n";
    body += "Enviado desde el formulario en l√≠nea de Grupo Fe.\n";

    // Codificar para URL
    const subject = encodeURIComponent("Formulario Bono Familiar - Grupo Fe");
    const mailBody = encodeURIComponent(body);

    // Abrir Gmail o cliente predeterminado
    const mailtoLink = `mailto:informaciongrupofe@gmail.com?subject=${subject}&body=${mailBody}`;
    window.location.href = mailtoLink;
  });
})();
</script>


<script>
const menuToggle = document.getElementById('menuToggle');
const navMenu = document.getElementById('navMenu');

menuToggle.addEventListener('click', () => {
  navMenu.classList.toggle('active');
  menuToggle.classList.toggle('active');
});
</script>

</body>
</html>
